# Введение в UNIX-системы

## Домашняя работа

### Урок 2. Работа в консоли

##### Задание 1. Просмотреть содержимое директорий /etc, /proc, /home. Посмотреть пару произвольных файлов в /etc.

```bash
ls -la /etc /proc /home
cat /etc/group
```



##### Задание 2. Выяснить, для чего предназначена команда cat. Используя данную команду, создать два файла с данными, а затем объединить их. Просмотреть содержимое созданного файла. Переименовать файл, дав ему новое имя.

```bash
#cat служит длявывода содержимого файла на экран
cat /etc/hostname > ~/test.file1            
cat /etc/hosts > ~/test.file2				
cat ./test.file1 ./test.file2 > test.file3   
cat ./test.file3 
mv ./test.file3 ./test_file
```



##### Задание 3. Создать несколько файлов. Создать директорию, переместить файл туда. Удалить все созданные в этом и предыдущем задании директории и файлы.

```bash
touch file1 file2 file3 file4
mkdir testdir
mv file* ./testdir
rm -rf testdir
```



##### Задание 4. В ОС Linux скрытыми файлами считаются те, имена которых начинаются с символа “.”. Сколько скрытых файлов в вашем домашнем каталоге? (Использовать конвейер. Подсказка: для подсчета количества строк можно использовать wc.)

```bash
ls -dl .[^.]* | wc -l
```



##### Задание 5. Попробовать вывести с помощью cat содержимое всех файлов в директории /etc. Направить ошибки в отдельный файл в вашей домашней директории. Сколько файлов, которые не удалось посмотреть, оказалось в списке?

```bash
cat /etc/* > stdout  2>errors.log
cat errors.log | wc -l
```



##### Задание 6. Запустить в одном терминале программу, а в другом терминале посмотреть PID процесса и остановить с помощью kill, посылая разные типы сигналов. Что происходит?

```bash
#pts/0: 
ping ya.ru
#pts/1:
ps aux | grep -v 'grep' | grep ping | cut -d ' ' -f11
kill -n 1 `ps aux | grep -v 'grep' | grep ping | cut -d ' ' -f11` #завершен: Hangup
kill -n 2 `ps <...>` #завершен
kill -n 3 `ps <...>` #перезапущен, pid не изменился
kill -n 4 `ps <...>` #прекращен: Illegal instruction
kill -n 5 `ps <...>` #прекращен: Trace/breakpoint trap
kill -n 6 `ps <...>` #прекращен: Aborted
kill -n 7 `ps <...>` #прекращен: Bus error
kill -n 8 `ps <...>` #прекращен: Floating point exception 
kill -n 9 `ps <...>` #прекращен: Killed
kill -n 10 `ps <...>` #прекращен: User defined signal 1
kill -n 11 `ps <...>` #прекращен: Segmentation fault (core dumped)
kill -n 12 `ps <...>` #прекращен: User defined signal 2
kill -n 13 `ps <...>` #прекращен 
kill -n 14 `ps <...>` #завершен
kill -n 15 `ps <...>` #прекращен: Terminated
```



##### \*Задание 7. Отобразить в /dev список устройств, которые в настоящее время используются вашим UID (для этого используется команда lsof). Организовать конвейер через less, чтобы посмотреть их должным образом.

```bash
lsof +d /dev | less
```



##### \*Задание 8. Cоздать директорию для хранения фотографий. В ней должны быть директории по годам (например, за последние 5 лет), и в каждой директории года — по директории для каждого месяца.

```
for i in {2017..2022}; do (for j in {1..12}; do mkdir -p $i/$j; done); done
```



##### \*Задание 9. Заполнить директории файлами вида ГГГГММДДНН.txt. Внутри файла должно быть его имя. Например: 2018011301.txt, 2018011302.txt.

```bash
#/bin/bahs
days() { date -d "${1:-'date +%Y'}/${2:-'date +%m'}/01 +1month -1day" +%d; }

for year in {2017..2022};
        do (for month_short in {1..12};
                do
                  month=`date -d $year/$month_short/01 +%m`
                  (for ((day=1; day <= `days $year $month`; day++))
                        do
                          (filename=`date -d $year/$month/$day +%Y%m%d%j`;
                          touch ./$year/$month/$filename;
                          echo $filename > ./$year/$month/$filename)
                  done);
        done);
done;
```



##### \*Задание 10. Полезное задание на конвейер. Использовать команду cut на вывод длинного списка каталога, чтобы отобразить только права доступа к файлам. Затем отправить в конвейере этот вывод на sort и uniq, чтобы отфильтровать все повторяющиеся строки. Потом с помощью wc подсчитать различные типы разрешений в этом каталоге. Самостоятельно решить задачу, как сделать так, чтобы в подсчет не добавлялись строка «Итого» и файлы . и .. (ссылки на текущую и родительскую директории).

```bash
ls -lA | cut -d ' ' -f1 | sort | uniq | grep -v 'total' | wc -l
```

